{"version":3,"sources":["pages/RulePage.tsx","pages/SubmitPage.tsx","utils/Constants.ts","components/TournamentBracket/GameNode.tsx","components/TournamentBracket/index.tsx","utils/ResultResolver.ts","components/TournamentBoard.tsx","components/TournamentBracket/TreeMaker.ts","utils/API.ts","pages/Tournament.tsx","App.tsx","index.tsx"],"names":["RulePage","Container","maxWidth","CssBaseline","Typography","component","variant","align","color","gutterBottom","Link","href","useStyles","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","margin","backgroundColor","palette","secondary","main","form","width","submit","SubmitPage","classes","useState","userId","setUserId","registerState","setRegisterState","to","className","Avatar","noValidate","onSubmit","e","preventDefault","fetch","method","headers","body","then","catch","TextField","required","fullWidth","label","autoFocus","value","onChange","inputValue","target","test","Button","type","disabled","length","useStyle","red","orange","yellow","blue","lightBlue","green","brown","grey","RatingName","props","c","rating","getRating","children","GameNode","node","name","map","i","key","TournamentBracket","root","resolveTournament","pickWinnerId","resolveByDfs","depth","maxDepth","index","child","childrenNames","getDepth","forEach","Math","max","TournamentBoard","atCoderUserIds","contestResults","ratingMap","players","leafCount","leafPlayers","player1","player2","push","currentPlayers","nextPlayers","node1","node2","makeTree","resolvedRoot","ranks","nextRank","size","get","ratings","rank","sort","a","b","fetchFixedUserList","seasonId","response","json","userIds","fetchRatingMap","allUsers","userMap","Map","user","set","user_id","Promise","all","registeredUsers","validUsers","localeCompare","heroContent","padding","Tournament","setAtCoderUserIds","undefined","setRatingMap","setContestResults","selectedDivision","setSelectedDivision","useEffect","fetchOrderedUserList","users","fetchContestResults","maps","divisionCount","ceil","divisionMembers","divisions","division","reverse","Grid","container","justify","direction","Tabs","v","centered","d","Tab","createMuiTheme","appBar","borderBottom","divider","toolbar","flexWrap","toolbarTitle","flexGrow","textDecoration","link","cardHeader","cardPricing","justifyContent","marginBottom","footer","borderTop","paddingTop","paddingBottom","breakpoints","up","App","now","Date","AppBar","position","elevation","Toolbar","RouterLink","noWrap","exact","path","render","match","params","id","toString","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.083909be.chunk.js","sourcesContent":["import { Container, CssBaseline, Link, Typography } from \"@material-ui/core\";\nimport React from \"react\";\n\nexport const RulePage = () => {\n  return (\n    <Container maxWidth=\"lg\">\n      <CssBaseline />\n      <Typography\n        component=\"h1\"\n        variant=\"h2\"\n        align=\"center\"\n        color=\"textPrimary\"\n        gutterBottom\n      >\n        ABC Tournament ルール\n      </Typography>\n      <Typography variant=\"h5\" color=\"textSecondary\" component=\"p\">\n        <ul>\n          <li>ABC の結果を使ったトーナメント戦です。</li>\n          <li>\n            各試合は 1 対 1 で行われ、AtCoder の ABC\n            級のコンテストでの順位が高かった方が勝者となり、次の試合に進出します。\n          </li>\n          <li>\n            ABC級のコンテストとはレーティング更新対象が 0 - 1999\n            のコンテストです。\n          </li>\n          <li>\n            同順位の場合は2020年8月29日 19:00\n            JST時点でのレートが高い方を勝者とします。\n          </li>\n          <li>\n            コンテストにおいて以下に該当するユーザーは\n            (コンテストで正の点数を取った人数 + 1) 位となります。\n            <ul>\n              <li>コンテストに参加登録していないユーザー</li>\n              <li>コンテストに参加登録したが1回も提出していないユーザー</li>\n              <li>\n                コンテストに参加登録し、1回以上提出したが点数が得られなかったユーザー\n              </li>\n            </ul>\n          </li>\n          <li>\n            各試合の対象となる ABC は以下のとおりです。\n            <ul>\n              <li>\n                1 回戦 -{\" \"}\n                <Link href=\"https://atcoder.jp/contests/abc177\">\n                  AtCoder Beginner Contest 177\n                </Link>\n              </li>\n              <li>2 回戦以降 - AtCoder からアナウンスがあり次第更新します。</li>\n            </ul>\n          </li>\n        </ul>\n      </Typography>\n    </Container>\n  );\n};\n","import {\n  Avatar,\n  Button,\n  Container,\n  CssBaseline,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useState } from \"react\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\nimport { Redirect } from \"react-router-dom\";\nimport { SEASON_ID } from \"../utils/Constants\";\n\ntype RegisterState = \"Registered\" | \"Input\" | \"Failed\";\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport const SubmitPage = () => {\n  const classes = useStyles();\n  const [userId, setUserId] = useState(\"\");\n  const [registerState, setRegisterState] = useState<RegisterState>(\"Input\");\n\n  const register = () => {\n    fetch(\"https://atcoder-tournament.herokuapp.com/api/user\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/x-www-form-urlencoded; charset=utf-8\",\n      },\n      body: `atcoder_id=${userId}&season_id=${SEASON_ID}`,\n    })\n      .then(() => {\n        setRegisterState(\"Registered\");\n      })\n      .catch(() => {\n        setRegisterState(\"Failed\");\n      });\n  };\n\n  if (registerState === \"Registered\") {\n    return <Redirect to=\"/\" />;\n  }\n\n  return (\n    <Container maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          Register\n        </Typography>\n        <form\n          className={classes.form}\n          noValidate\n          onSubmit={(e) => {\n            e.preventDefault();\n            register();\n          }}\n        >\n          <TextField\n            variant=\"outlined\"\n            margin=\"normal\"\n            required\n            fullWidth\n            label=\"AtCoder ID\"\n            autoFocus\n            value={userId}\n            onChange={(e) => {\n              const inputValue = e.target.value;\n              if (/^[a-zA-Z0-9\\-_]*$/.test(inputValue)) {\n                setUserId(inputValue);\n              }\n            }}\n          />\n          <Button\n            type=\"submit\"\n            fullWidth\n            variant=\"contained\"\n            color=\"primary\"\n            className={classes.submit}\n            disabled={userId.length === 0}\n          >\n            Register\n          </Button>\n        </form>\n      </div>\n    </Container>\n  );\n};\n","export const SEASON_ID = 1;\nexport const DEADLINE = 1598695200;\n\nexport const UNDEFINED_NODE = \"...\";\nexport const MAXIMUM_MEMBER = 128;\n","import { Link } from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { BracketNode } from \"./index\";\nimport {\n  red,\n  orange,\n  yellow,\n  blue,\n  lightBlue,\n  green,\n  brown,\n  grey,\n} from \"@material-ui/core/colors\";\nconst useStyle = makeStyles(() => ({\n  red: {\n    color: red[500],\n  },\n  orange: {\n    color: orange[500],\n  },\n  yellow: {\n    color: yellow[500],\n  },\n  blue: {\n    color: blue[800],\n  },\n  lightBlue: {\n    color: lightBlue[300],\n  },\n  green: {\n    color: green[400],\n  },\n  brown: {\n    color: brown[400],\n  },\n  grey: {\n    color: grey[500],\n  },\n}));\n\nconst RatingName = (props: {\n  children: string;\n  getRating: (userId: string) => number | undefined;\n}) => {\n  const classes = useStyle();\n  const rating = props.getRating(props.children);\n  if (!rating) {\n    return <p>{props.children}</p>;\n  }\n  let c: string;\n  if (rating < 400) {\n    c = classes.grey;\n  } else if (rating < 800) {\n    c = classes.brown;\n  } else if (rating < 1200) {\n    c = classes.green;\n  } else if (rating < 1600) {\n    c = classes.lightBlue;\n  } else if (rating < 2000) {\n    c = classes.blue;\n  } else if (rating < 2400) {\n    c = classes.yellow;\n  } else if (rating < 2800) {\n    c = classes.orange;\n  } else {\n    c = classes.red;\n  }\n  return (\n    <p>\n      <Link className={c} href={`https://atcoder.jp/users/${props.children}`}>\n        {props.children}\n      </Link>\n    </p>\n  );\n};\n\ninterface Props {\n  node: BracketNode;\n  getRating: (userId: string) => number | undefined;\n}\n\nexport const GameNode = (props: Props) => {\n  if (props.node.children.length === 0) {\n    return (\n      <RatingName getRating={props.getRating}>{props.node.name}</RatingName>\n    );\n  } else {\n    return (\n      <div className=\"item\">\n        <div className=\"item-parent\">\n          <RatingName getRating={props.getRating}>{props.node.name}</RatingName>\n        </div>\n        <div className=\"item-children\">\n          {props.node.children.map((node, i) => (\n            <div key={i} className=\"item-child\">\n              <GameNode getRating={props.getRating} node={node} />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n};\n","import React from \"react\";\nimport { GameNode } from \"./GameNode\";\n\nexport interface BracketNode {\n  name: string;\n  children: BracketNode[];\n}\n\ninterface Props {\n  root: BracketNode;\n  getRating: (userId: string) => number | undefined;\n}\n\nexport const TournamentBracket = (props: Props) => {\n  return (\n    <div className=\"wrapper\">\n      <GameNode getRating={props.getRating} node={props.root} />\n    </div>\n  );\n};\n","import { BracketNode } from \"../components/TournamentBracket\";\n\nconst getDepth = (node: BracketNode, depth: number) => {\n  let maxDepth = depth;\n  node.children.forEach((child) => {\n    maxDepth = Math.max(getDepth(child, depth + 1), maxDepth);\n  });\n  return maxDepth;\n};\n\nconst resolveByDfs = (\n  node: BracketNode,\n  depth: number,\n  maxDepth: number,\n  pickWinnerId: (index: number, userIds: string[]) => string\n): BracketNode => {\n  const index = maxDepth - depth - 1;\n  const children = node.children.map((child) =>\n    resolveByDfs(child, depth + 1, maxDepth, pickWinnerId)\n  );\n  const childrenNames = children.map((child) => child.name);\n  const name =\n    childrenNames.length === 0 ? node.name : pickWinnerId(index, childrenNames);\n  return { name, children };\n};\n\nexport const resolveTournament = (\n  root: BracketNode,\n  pickWinnerId: (index: number, userIds: string[]) => string\n) => {\n  const depth = getDepth(root, 0);\n  return resolveByDfs(root, 0, depth, pickWinnerId);\n};\n","import React from \"react\";\nimport { TournamentBracket } from \"./TournamentBracket\";\nimport { makeTree } from \"./TournamentBracket/TreeMaker\";\nimport { UNDEFINED_NODE } from \"../utils/Constants\";\nimport { resolveTournament } from \"../utils/ResultResolver\";\n\ninterface Props {\n  atCoderUserIds: string[];\n  ratingMap?: Map<string, number>;\n  contestResults?: Map<string, number>[];\n}\n\nexport const TournamentBoard = (props: Props) => {\n  const { atCoderUserIds, contestResults, ratingMap } = props;\n\n  const pickWinner = (index: number, children: string[]) => {\n    if (!contestResults || contestResults.length <= index) {\n      return UNDEFINED_NODE;\n    }\n    const ranks = children.map((child) => {\n      const resultMap = contestResults[index];\n      const nextRank = resultMap.size + 1;\n      return contestResults[index].get(child) ?? nextRank;\n    });\n    const ratings = children.map((child) => {\n      return ratingMap?.get(child) ?? 0;\n    });\n    const userInfo = children.map((userId, i) => ({\n      userId,\n      rating: ratings[i],\n      rank: ranks[i],\n    }));\n    const sorted = userInfo.sort((a, b) => {\n      if (a.rank === b.rank) {\n        return b.rating - a.rating;\n      }\n      return a.rank - b.rank;\n    });\n    return sorted[0].userId;\n  };\n\n  const root =\n    atCoderUserIds.length > 0\n      ? makeTree(atCoderUserIds)\n      : { name: \"loading\", children: [] };\n  const resolvedRoot = resolveTournament(root, pickWinner);\n\n  return (\n    <>\n      <TournamentBracket\n        root={resolvedRoot}\n        getRating={(userId) => ratingMap?.get(userId)}\n      />\n    </>\n  );\n};\n","import { UNDEFINED_NODE } from \"../../utils/Constants\";\nimport { BracketNode } from \"./index\";\n\nexport const makeTree = (players: string[]): BracketNode => {\n  let leafCount = 1;\n  while (leafCount * 2 <= players.length) {\n    leafCount *= 2;\n  }\n\n  let leafPlayers = [] as BracketNode[];\n  for (let i = 0; i < leafCount; i++) {\n    if (leafCount + i < players.length) {\n      const player1 = players[i];\n      const player2 = players[leafCount + i];\n      leafPlayers.push({\n        name: UNDEFINED_NODE,\n        children: [\n          { name: player2, children: [] },\n          { name: player1, children: [] },\n        ],\n      });\n    } else {\n      leafPlayers.push({\n        name: players[i],\n        children: [],\n      });\n    }\n  }\n\n  let currentPlayers = leafPlayers;\n\n  while (currentPlayers.length > 1) {\n    const nextPlayers = [];\n    for (let i = 0; i < currentPlayers.length; i += 2) {\n      const node1 = currentPlayers[i];\n      if (i + 1 === currentPlayers.length) {\n        nextPlayers.push({ name: UNDEFINED_NODE, children: [node1] });\n      } else {\n        const node2 = currentPlayers[i + 1];\n        nextPlayers.push({ name: UNDEFINED_NODE, children: [node1, node2] });\n      }\n    }\n    currentPlayers = nextPlayers;\n  }\n\n  return currentPlayers[0];\n};\n","async function fetchFixedUserList(seasonId: string) {\n  const userIds: string[] = await fetch(\n    `./users-${seasonId}.json`\n  ).then((response) => response.json());\n  return userIds;\n}\n\nasync function fetchUserList(seasonId: string) {\n  const userIds: string[] = await fetch(\n    `https://atcoder-tournament.herokuapp.com/api/users?season_id=${seasonId}`\n  ).then((response) => response.json());\n  return userIds;\n}\n\nexport async function fetchRatingMap() {\n  const allUsers: { user_id: string; rating: number }[] = await fetch(\n    \"./ratings.json\"\n  ).then((response) => response.json());\n  const userMap = new Map<string, number>();\n  allUsers.forEach((user) => {\n    userMap.set(user.user_id, user.rating);\n  });\n  return userMap;\n}\n\nexport async function fetchOrderedUserList(seasonId: string) {\n  const [userMap, registeredUsers] = await Promise.all([\n    fetchRatingMap(),\n    fetchFixedUserList(seasonId),\n  ]);\n\n  const validUsers = [] as { rating: number; userId: string }[];\n  registeredUsers.forEach((userId) => {\n    const rating = userMap.get(userId);\n    if (rating) {\n      validUsers.push({ rating, userId });\n    }\n  });\n  validUsers.sort((a, b) => {\n    if (a.rating === b.rating) {\n      return a.userId.localeCompare(b.userId);\n    } else {\n      return b.rating - a.rating;\n    }\n  });\n  return validUsers.map((user) => user.userId);\n}\n\nasync function fetchSingleContestMap(contestId: string) {\n  const contestResult = await fetch(`./${contestId}.json`).then((response) =>\n    response.json()\n  );\n  const results: {\n    Rank: number;\n    UserScreenName: string;\n    TotalResult: { Score: number };\n  }[] = contestResult.StandingsData;\n  const map = new Map<string, number>();\n  results.forEach((result) => {\n    if (result.TotalResult.Score > 0) {\n      map.set(result.UserScreenName, result.Rank);\n    }\n  });\n  return map;\n}\n\nexport async function fetchContestResults() {\n  return Promise.all([\n    // fetchSingleContestMap(\"abc174\"),\n    // fetchSingleContestMap(\"abc175\"),\n    // fetchSingleContestMap(\"abc176\"),\n  ]);\n}\n","import {\n  Container,\n  CssBaseline,\n  Grid,\n  Tab,\n  Tabs,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useEffect, useState } from \"react\";\nimport { TournamentBoard } from \"../components/TournamentBoard\";\nimport {\n  fetchContestResults,\n  fetchOrderedUserList,\n  fetchRatingMap,\n} from \"../utils/API\";\nimport \"./tournament.scss\";\nimport { MAXIMUM_MEMBER } from \"../utils/Constants\";\n\nconst formatClass = (index: number) => {\n  if (index === 0) {\n    return \"A\";\n  }\n  if (index < 3) {\n    return `B${index}`;\n  }\n  if (index < 7) {\n    return `C${index - 2}`;\n  }\n  return `D${index - 6}`;\n};\n\nconst useStyles = makeStyles((theme) => ({\n  heroContent: {\n    padding: theme.spacing(8, 0, 6),\n  },\n}));\n\ninterface Props {\n  seasonId: string;\n}\n\nexport const Tournament = (props: Props) => {\n  const classes = useStyles();\n  const [atCoderUserIds, setAtCoderUserIds] = useState<string[]>([]);\n  const [ratingMap, setRatingMap] = useState<Map<string, number> | undefined>(\n    undefined\n  );\n  const [contestResults, setContestResults] = useState<\n    Map<string, number>[] | undefined\n  >(undefined);\n  const [selectedDivision, setSelectedDivision] = useState(0);\n\n  useEffect(() => {\n    fetchOrderedUserList(props.seasonId).then((users) =>\n      setAtCoderUserIds(users)\n    );\n  }, [props.seasonId]);\n  useEffect(() => {\n    if (!ratingMap) {\n      fetchRatingMap().then((map) => setRatingMap(map));\n    }\n    if (!contestResults) {\n      fetchContestResults().then((maps) => setContestResults(maps));\n    }\n  });\n\n  const divisionCount = Math.ceil(atCoderUserIds.length / MAXIMUM_MEMBER);\n  const divisionMembers = Math.ceil(\n    atCoderUserIds.length / Math.max(divisionCount, 1)\n  );\n\n  const divisions = [] as string[][];\n  let i = atCoderUserIds.length - 1;\n  while (i >= 0) {\n    const division = [] as string[];\n    while (i >= 0 && division.length < divisionMembers) {\n      division.push(atCoderUserIds[i]);\n      i -= 1;\n    }\n    divisions.push(division.reverse());\n  }\n  divisions.reverse();\n\n  return (\n    <>\n      <CssBaseline />\n      <Container maxWidth=\"lg\" className={classes.heroContent}>\n        <Grid container justify=\"center\" direction=\"column\">\n          <Typography\n            component=\"h1\"\n            variant=\"h2\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            AtCoder Beginner Contest Tournament\n          </Typography>\n          <Typography\n            component=\"h4\"\n            variant=\"h4\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            シーズン 1\n          </Typography>\n          <Typography\n            component=\"div\"\n            variant=\"body1\"\n            align=\"center\"\n            color=\"textPrimary\"\n            gutterBottom\n          >\n            {`参加人数: ${atCoderUserIds.length}`}\n          </Typography>\n          <Tabs\n            value={selectedDivision}\n            onChange={(e, v) => setSelectedDivision(v)}\n            centered\n          >\n            {divisions.map((d, i) => (\n              <Tab label={`CLASS ${formatClass(i)}`} key={i} />\n            ))}\n          </Tabs>\n        </Grid>\n      </Container>\n      <TournamentBoard\n        atCoderUserIds={divisions[selectedDivision] ?? []}\n        ratingMap={ratingMap}\n        contestResults={contestResults}\n      />\n    </>\n  );\n};\n","import {\n  AppBar,\n  Container,\n  createMuiTheme,\n  CssBaseline,\n  Link,\n  MuiThemeProvider,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport {\n  HashRouter,\n  Link as RouterLink,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport \"./App.css\";\nimport { RulePage } from \"./pages/RulePage\";\nimport { SubmitPage } from \"./pages/SubmitPage\";\nimport { Tournament } from \"./pages/Tournament\";\nimport { DEADLINE, SEASON_ID } from \"./utils/Constants\";\n\nconst theme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n  },\n});\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    borderBottom: `1px solid ${theme.palette.divider}`,\n  },\n  toolbar: {\n    flexWrap: \"wrap\",\n  },\n  toolbarTitle: {\n    flexGrow: 1,\n    textDecoration: \"none\",\n  },\n  link: {\n    margin: theme.spacing(1, 1.5),\n  },\n  heroContent: {\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardHeader: {\n    backgroundColor:\n      theme.palette.type === \"light\"\n        ? theme.palette.grey[200]\n        : theme.palette.grey[700],\n  },\n  cardPricing: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"baseline\",\n    marginBottom: theme.spacing(2),\n  },\n  footer: {\n    borderTop: `1px solid ${theme.palette.divider}`,\n    marginTop: theme.spacing(8),\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    [theme.breakpoints.up(\"sm\")]: {\n      paddingTop: theme.spacing(6),\n      paddingBottom: theme.spacing(6),\n    },\n  },\n}));\nconst App = () => {\n  const classes = useStyles();\n  const now = Date.now() / 1000;\n  return (\n    <HashRouter>\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <AppBar\n          position=\"static\"\n          color=\"default\"\n          elevation={0}\n          className={classes.appBar}\n        >\n          <Toolbar className={classes.toolbar}>\n            <Typography\n              component={RouterLink}\n              variant=\"h6\"\n              color=\"inherit\"\n              noWrap\n              className={classes.toolbarTitle}\n              to=\"/\"\n            >\n              ABC トーナメント\n            </Typography>\n            <nav>\n              {now < DEADLINE && (\n                <Link\n                  component={RouterLink}\n                  variant=\"button\"\n                  color=\"textPrimary\"\n                  to=\"/submit\"\n                  className={classes.link}\n                >\n                  登録\n                </Link>\n              )}\n              <Link\n                component={RouterLink}\n                variant=\"button\"\n                color=\"textPrimary\"\n                to=\"/rule\"\n                className={classes.link}\n              >\n                ルール\n              </Link>\n            </nav>\n          </Toolbar>\n        </AppBar>\n        <Container component=\"main\" maxWidth=\"lg\">\n          <Switch>\n            <Route\n              exact\n              path=\"/tournament/:id([0-9]+)\"\n              render={({ match }) => {\n                const seasonId: string | undefined = match.params.id;\n                return (\n                  <Tournament seasonId={seasonId ?? SEASON_ID.toString()} />\n                );\n              }}\n            />\n            <Route path=\"/submit\">\n              <SubmitPage />\n            </Route>\n            <Route path=\"/rule\">\n              <RulePage />\n            </Route>\n            <Redirect path=\"/\" to={`/tournament/${SEASON_ID}`} />\n          </Switch>\n        </Container>\n      </MuiThemeProvider>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}