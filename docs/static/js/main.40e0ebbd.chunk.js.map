{"version":3,"sources":["pages/RegisterPage.tsx","components/GameNode/RankedRatingName.tsx","components/GameNode/GameNode.tsx","utils/API.ts","pages/Tournament.tsx","App.tsx","utils/Constants.ts","index.tsx"],"names":["RegistrationForm","props","classes","useStyles","className","form","noValidate","onSubmit","e","preventDefault","register","state","TextField","variant","margin","required","fullWidth","label","autoFocus","value","userId","onChange","inputValue","target","test","setState","Button","type","color","submit","disabled","length","VerificationForm","code","onClick","confirm","makeStyles","theme","paper","marginTop","spacing","display","flexDirection","alignItems","avatar","backgroundColor","palette","secondary","main","width","RegisterPage","useState","registerState","setRegisterState","Container","maxWidth","CssBaseline","Avatar","Typography","component","input","fetch","method","headers","body","JSON","stringify","user_id","then","response","json","secret","verification_code","catch","verify","token","CircularProgress","useRatingColorStyle","red","orange","yellow","blue","lightBlue","green","brown","grey","RatingName","c","children","rating","screenUserId","slice","Link","href","useStyle","nodeBox","textShadow","fontFamily","borderWidth","borderRadius","fontSize","minWidth","minHeight","nameContainer","padding","textAlign","rankContainer","marginLeft","winner","nodeText","rankText","RankedRatingName","user","rank","Box","justifyContent","item","itemChildren","itemChild","marginBottom","position","content","top","right","transform","height","itemParent","left","GameNode","promotedUser","tournament","depthLimit","depth","undefined","map","child","i","key","fetchTournament","seasonId","fetchTournament2nd","a","usersPromise","ratingsPromise","ratings","Map","forEach","set","toLowerCase","users","get","constructAll2ndTournament","NEXT_A1","NEXT_A2","A","B","C","D","push","Object","entries","flatMap","bracketUsers","splitClassA","splitClass","node","construct2ndTournament","A1","A2","A3","sort","b","nextA1UserId","index","findIndex","splice","pop","nextA2UserId","classLimit","Math","floor","pos","result","localeCompare","SingleWinnerTable","m","align","AntTab","withStyles","root","selected","Tab","Tournament","setTournament","selectedDivision","setSelectedDivision","showTop16","setShowTop16","keys","useEffect","Grid","container","justify","direction","noWrap","Tabs","v","centered","top4","createMuiTheme","appBar","borderBottom","divider","toolbar","flexWrap","toolbarTitle","flexGrow","textDecoration","link","heroContent","cardHeader","cardPricing","footer","borderTop","paddingTop","paddingBottom","breakpoints","up","App","AppBar","elevation","Toolbar","RouterLink","to","rel","exact","path","render","match","params","id","toString","ReactDOM","StrictMode","document","getElementById"],"mappings":"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","file":"static/js/main.40e0ebbd.chunk.js","sourcesContent":["import {\n  Avatar,\n  Button,\n  CircularProgress,\n  Container,\n  CssBaseline,\n  TextField,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React, { useState } from \"react\";\nimport LockOutlinedIcon from \"@material-ui/icons/LockOutlined\";\n\nconst RegistrationForm = (props: {\n  state: InputState;\n  setState: (input: InputState) => void;\n  register: (input: InputState) => void;\n}) => {\n  const classes = useStyles();\n  return (\n    <form\n      className={classes.form}\n      noValidate\n      onSubmit={(e) => {\n        e.preventDefault();\n        props.register(props.state);\n      }}\n    >\n      <TextField\n        variant=\"outlined\"\n        margin=\"normal\"\n        required\n        fullWidth\n        label=\"AtCoder ID\"\n        autoFocus\n        value={props.state.userId}\n        onChange={(e) => {\n          const inputValue = e.target.value;\n          if (/^[a-zA-Z0-9\\-_]*$/.test(inputValue)) {\n            props.setState({\n              ...props.state,\n              userId: inputValue,\n            });\n          }\n        }}\n      />\n      <Button\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        color=\"primary\"\n        className={classes.submit}\n        disabled={props.state.userId.length === 0}\n      >\n        登録\n      </Button>\n    </form>\n  );\n};\n\nconst VerificationForm = (props: {\n  state: VerifyState;\n  confirm: () => void;\n}) => {\n  const classes = useStyles();\n  return (\n    <>\n      <p>本人確認のため、AtCoder にログインして、所属を一時的に</p>\n      <code>{props.state.code}</code>\n      <p>に変更して、「確認」ボタンを押してください。</p>\n      <Button\n        onClick={props.confirm}\n        type=\"submit\"\n        fullWidth\n        variant=\"contained\"\n        color=\"primary\"\n        className={classes.submit}\n      >\n        確認\n      </Button>\n    </>\n  );\n};\n\ninterface InputState {\n  type: \"Input\";\n  userId: string;\n}\ninterface VerifyState {\n  type: \"Verify\";\n  userId: string;\n  secret: string;\n  code: string;\n}\ninterface RegisteredState {\n  type: \"Registered\";\n}\ninterface FailedState {\n  type: \"Failed\";\n}\ninterface PendingState {\n  type: \"Pending\";\n}\n\ntype RegisterState =\n  | InputState\n  | VerifyState\n  | RegisteredState\n  | FailedState\n  | PendingState;\n\nconst useStyles = makeStyles((theme) => ({\n  paper: {\n    marginTop: theme.spacing(8),\n    display: \"flex\",\n    flexDirection: \"column\",\n    alignItems: \"center\",\n  },\n  avatar: {\n    margin: theme.spacing(1),\n    backgroundColor: theme.palette.secondary.main,\n  },\n  form: {\n    width: \"100%\", // Fix IE 11 issue.\n    marginTop: theme.spacing(1),\n  },\n  submit: {\n    margin: theme.spacing(3, 0, 2),\n  },\n}));\n\nexport const RegisterPage = () => {\n  const classes = useStyles();\n  const [registerState, setRegisterState] = useState<RegisterState>({\n    type: \"Input\",\n    userId: \"\",\n  });\n\n  const getVerificationCode = (input: InputState) => {\n    setRegisterState({ type: \"Pending\" });\n    fetch(\"https://atcoder-auth.kenkoooo.com/api/authorize\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ user_id: input.userId }),\n    })\n      .then((response) => response.json())\n      .then((response) => {\n        setRegisterState({\n          type: \"Verify\",\n          userId: input.userId,\n          secret: response.secret,\n          code: response.verification_code,\n        });\n      })\n      .catch(() => {\n        setRegisterState({\n          type: \"Failed\",\n        });\n      });\n  };\n  const confirmRegistration = (verify: VerifyState) => {\n    setRegisterState({ type: \"Pending\" });\n    fetch(\"https://atcoder-auth.kenkoooo.com/api/confirm\", {\n      method: \"POST\",\n      headers: {\n        \"Content-Type\": \"application/json\",\n      },\n      body: JSON.stringify({ user_id: verify.userId, secret: verify.secret }),\n    })\n      .then((response) => response.json())\n      .then((response) => {\n        const token = response.token;\n        return fetch(\"https://atcoder-tournament.herokuapp.com/api/user\", {\n          method: \"POST\",\n          headers: { \"Content-Type\": \"application/x-www-form-urlencoded\" },\n          body: `user_id=${verify.userId}&token=${token}`,\n        });\n      })\n      .then(() => {\n        setRegisterState({ type: \"Registered\" });\n      })\n      .catch(() => {\n        setRegisterState({\n          type: \"Failed\",\n        });\n      });\n  };\n\n  return (\n    <Container maxWidth=\"xs\">\n      <CssBaseline />\n      <div className={classes.paper}>\n        <Avatar className={classes.avatar}>\n          <LockOutlinedIcon />\n        </Avatar>\n        <Typography component=\"h1\" variant=\"h5\">\n          第2期\n        </Typography>\n        <Typography component=\"h1\" variant=\"h5\">\n          ABCトーナメント参加登録\n        </Typography>\n        <Typography component=\"h2\" variant=\"h5\">\n          2020/11/22 19:00 JST 〆切\n        </Typography>\n        {registerState.type === \"Input\" && (\n          <RegistrationForm\n            state={registerState}\n            setState={setRegisterState}\n            register={getVerificationCode}\n          />\n        )}\n        {registerState.type === \"Verify\" && (\n          <VerificationForm\n            state={registerState}\n            confirm={() => confirmRegistration(registerState)}\n          />\n        )}\n        {registerState.type === \"Failed\" && (\n          <p>登録に失敗しました。本人確認に失敗したか、既に登録済みです。</p>\n        )}\n        {registerState.type === \"Registered\" && <p>登録完了しました。</p>}\n        {registerState.type === \"Pending\" && <CircularProgress />}\n      </div>\n    </Container>\n  );\n};\n","import { Box, Link } from \"@material-ui/core\";\nimport {\n  blue,\n  brown,\n  green,\n  grey,\n  lightBlue,\n  orange,\n  red,\n  yellow,\n} from \"@material-ui/core/colors\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { User } from \"../../models/TournamentNode\";\n\nconst useRatingColorStyle = makeStyles(() => ({\n  red: {\n    color: red[500],\n  },\n  orange: {\n    color: orange[500],\n  },\n  yellow: {\n    color: yellow[500],\n  },\n  blue: {\n    color: blue[600],\n  },\n  lightBlue: {\n    color: lightBlue[200],\n  },\n  green: {\n    color: green[400],\n  },\n  brown: {\n    color: brown[400],\n  },\n  grey: {\n    color: grey[500],\n  },\n}));\n\nconst RatingName = (props: {\n  children: string;\n  rating: number | undefined;\n}) => {\n  const classes = useRatingColorStyle();\n  const userId = props.children;\n  const rating = props.rating;\n  if (!rating) {\n    return <p>{userId}</p>;\n  }\n  let c: string;\n  if (rating < 400) {\n    c = classes.grey;\n  } else if (rating < 800) {\n    c = classes.brown;\n  } else if (rating < 1200) {\n    c = classes.green;\n  } else if (rating < 1600) {\n    c = classes.lightBlue;\n  } else if (rating < 2000) {\n    c = classes.blue;\n  } else if (rating < 2400) {\n    c = classes.yellow;\n  } else if (rating < 2800) {\n    c = classes.orange;\n  } else {\n    c = classes.red;\n  }\n  const screenUserId =\n    userId.length <= 13 ? userId : userId.slice(0, 10) + \"...\";\n  return (\n    <Link className={c} href={`https://atcoder.jp/users/${userId}`}>\n      {screenUserId}\n    </Link>\n  );\n};\n\ninterface Props {\n  user: User | null;\n  rank: number | null;\n  winner?: boolean;\n}\n\nconst useStyle = makeStyles({\n  nodeBox: {\n    textShadow: \"rgb(34,34,34) 1px 1px 1px\",\n    fontFamily: '\"Roboto Light\", sans-serif',\n    borderWidth: 0,\n    borderRadius: \"3px\",\n    fontSize: \"12px\",\n    minWidth: \"120px\",\n    minHeight: \"24px\",\n    backgroundColor: \"#595a5e\",\n  },\n  nameContainer: {\n    padding: \"3px\",\n    margin: 0,\n    textAlign: \"center\",\n  },\n  rankContainer: {\n    padding: \"3px\",\n    borderWidth: 0,\n    borderRadius: \"3px\",\n    marginLeft: \"auto\",\n    fontSize: \"10px\",\n    minWidth: \"24px\",\n    backgroundColor: (props: { winner?: boolean }) =>\n      props.winner ? \"#f58540\" : \"#828489\",\n  },\n  nodeText: {\n    padding: \"3px\",\n    margin: 0,\n    textAlign: \"center\",\n  },\n  rankText: {\n    color: \"black\",\n    textAlign: \"center\",\n    textShadow: \"none\",\n  },\n});\n\nexport const RankedRatingName = (props: Props) => {\n  const { user, rank, winner } = props;\n  const classes = useStyle({ winner });\n\n  if (!user) {\n    return (\n      <div className={classes.nodeBox}>\n        <p>...</p>\n      </div>\n    );\n  }\n  if (!rank) {\n    return (\n      <div className={classes.nodeBox}>\n        <div className={classes.nameContainer}>\n          <RatingName rating={user.rating}>{user.user_id}</RatingName>\n        </div>\n      </div>\n    );\n  }\n\n  const rankText = rank > 100000 ? \"-\" : rank;\n  return (\n    <Box display=\"flex\" justifyContent=\"center\" className={classes.nodeBox}>\n      <div className={classes.nameContainer}>\n        <RatingName rating={user.rating}>{user.user_id}</RatingName>\n      </div>\n      <Box\n        display=\"flex\"\n        alignItems=\"center\"\n        justifyContent=\"center\"\n        className={classes.rankContainer}\n      >\n        <div className={classes.rankText}>{rankText}</div>\n      </Box>\n    </Box>\n  );\n};\n","import { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport { TournamentNode } from \"../../models/TournamentNode\";\nimport { RankedRatingName } from \"./RankedRatingName\";\n\nconst SIDE_MARGIN = \"60px\";\nconst BORDER = \"3px\";\nconst NODE_PADDING = \"3px\";\nconst VERTICAL_MARGIN = \"1px\";\n\nconst useStyle = makeStyles(() => ({\n  item: {\n    display: \"flex\",\n    flexDirection: \"row-reverse\",\n\n    \"& p\": {\n      padding: NODE_PADDING,\n      margin: 0,\n      textShadow: \"rgb(34, 34, 34) 1px 1px 1px\",\n      fontSize: \"14px\",\n      fontFamily: '\"Roboto Light\", sans-serif',\n      borderWidth: 0,\n      borderRadius: NODE_PADDING,\n      minWidth: \"100px\",\n      textAlign: \"center\",\n    },\n  },\n\n  itemChildren: {\n    display: \"flex\",\n    flexDirection: \"column\",\n    justifyContent: \"center\",\n  },\n\n  itemChild: {\n    display: \"flex\",\n    alignItems: \"flex-start\",\n    justifyContent: \"flex-end\",\n    marginTop: VERTICAL_MARGIN,\n    marginBottom: VERTICAL_MARGIN,\n    position: \"relative\",\n\n    \"&:before\": {\n      content: '\"\"',\n      position: \"absolute\",\n      backgroundColor: \"#fff\",\n      top: \"50%\",\n\n      right: 0,\n      transform: \"translateX(100%)\",\n      width: `calc(${SIDE_MARGIN} / 2)`,\n      height: BORDER,\n    },\n\n    \"&:after\": {\n      content: '\"\"',\n      position: \"absolute\",\n      backgroundColor: \"#fff\",\n      top: \"50%\",\n\n      right: `calc(-${SIDE_MARGIN} / 2)`,\n      // height: `calc(75% + ${VERTICAL_MARGIN} * 2)`,\n      height: `calc(50% + ${VERTICAL_MARGIN} * 2)`,\n      width: BORDER,\n    },\n\n    \"&:not(:last-child):not(:first-child)\": {\n      \"&:after\": {\n        transform: \"translateY(-50%) scaleY(2)\",\n      },\n    },\n\n    \"&:last-child\": {\n      \"&:after\": {\n        transform: \"translateY(-100%)\",\n      },\n    },\n\n    \"&:only-child:after\": {\n      display: \"none\",\n    },\n  },\n\n  itemParent: {\n    position: \"relative\",\n    marginLeft: SIDE_MARGIN,\n    display: \"flex\",\n    alignItems: \"center\",\n\n    \"&:after\": {\n      position: \"absolute\",\n      content: '\"\"',\n      width: `calc(${SIDE_MARGIN} / 2)`,\n      height: BORDER,\n      left: 0,\n      top: \"50%\",\n      backgroundColor: \"#fff\",\n      transform: \"translateX(-100%)\",\n    },\n  },\n}));\n\ninterface Props {\n  tournament: TournamentNode;\n  promotedUser?: string;\n  depth: number;\n  depthLimit: number;\n}\n\nexport const GameNode = (props: Props) => {\n  const classes = useStyle();\n  const promotedUser = props.tournament.user?.user_id;\n  if (\n    props.tournament.children.length === 0 ||\n    props.depthLimit <= props.depth\n  ) {\n    return (\n      <RankedRatingName\n        user={props.tournament.user}\n        rank={props.tournament.rank}\n        winner={\n          props.promotedUser !== undefined &&\n          props.tournament.user?.user_id === props.promotedUser\n        }\n      />\n    );\n  } else {\n    return (\n      <div className={classes.item}>\n        <div className={classes.itemParent}>\n          <RankedRatingName\n            user={props.tournament.user}\n            rank={props.tournament.rank}\n            winner={\n              props.promotedUser !== undefined &&\n              props.tournament.user?.user_id === props.promotedUser\n            }\n          />\n        </div>\n        <div className={classes.itemChildren}>\n          {props.tournament.children.map((child, i) => (\n            <div key={i} className={classes.itemChild}>\n              <GameNode\n                tournament={child}\n                promotedUser={promotedUser}\n                depth={props.depth + 1}\n                depthLimit={props.depthLimit}\n              />\n            </div>\n          ))}\n        </div>\n      </div>\n    );\n  }\n};\n","import {\n  TournamentNode,\n  TournamentResponse,\n  User,\n} from \"../models/TournamentNode\";\n\nexport const fetchTournament = (seasonId: string) => {\n  if (seasonId === \"2\") {\n    return fetchTournament2nd();\n  } else {\n    return fetch(`./bracket-${seasonId}.json`)\n      .then((response) => response.json())\n      .then((response) => response as TournamentResponse);\n  }\n};\n\nasync function fetchTournament2nd(): Promise<TournamentResponse> {\n  const usersPromise = fetch(\n    \"https://atcoder-tournament.herokuapp.com/api/users\"\n  )\n    .then((response) => response.json())\n    .then((response) => response as string[]);\n\n  const ratingsPromise = fetch(\"./ratings.json\")\n    .then((response) => response.json())\n    .then(\n      (response) =>\n        response as {\n          user_id: string;\n          rating: number;\n        }[]\n    )\n    .then((ratings) => {\n      const map = new Map<string, number>();\n      ratings.forEach((rating) => {\n        map.set(rating.user_id.toLowerCase(), rating.rating);\n      });\n      return map;\n    });\n\n  const ratings = await ratingsPromise;\n  const users = (await usersPromise).map((userId) => {\n    const rating = ratings.get(userId.toLowerCase()) ?? 0;\n    return { user_id: userId, rating };\n  });\n  return constructAll2ndTournament(users);\n}\n\nconst NEXT_A1 = [\n  // 1st A top 16\n  \"kort0n\",\n  \"leaf1415\",\n  \"fuppy0716\",\n  \"snuke\",\n  \"Rubikun\",\n  \"dreamoon\",\n  \"mikit\",\n  \"uwi\",\n  \"Kiri8128\",\n  \"heno239\",\n  \"cuthbert\",\n  \"tempura0224\",\n  \"LayCurse\",\n  \"climpet\",\n];\nconst NEXT_A2 = [\n  // 1st B1 top 4\n  \"carrot46\",\n  \"morio__\",\n  \"idsigma\",\n  \"mugen1337\",\n];\n\nconst constructAll2ndTournament = (users: User[]): TournamentResponse => {\n  const classes: { [key: string]: User[] } = {\n    A: [],\n    B: [],\n    C: [],\n    D: [],\n  };\n\n  users.forEach((user) => {\n    if (user.rating >= 2000) {\n      classes.A.push(user);\n    } else if (user.rating >= 1600) {\n      classes.B.push(user);\n    } else if (user.rating >= 1200) {\n      classes.C.push(user);\n    } else {\n      classes.D.push(user);\n    }\n  });\n\n  const response: TournamentResponse = {};\n  Object.entries(classes)\n    .flatMap(([key, bracketUsers]) => {\n      if (key === \"A\") {\n        return Object.entries(splitClassA(bracketUsers));\n      } else {\n        return Object.entries(splitClass(bracketUsers, key));\n      }\n    })\n    .forEach(([key, bracketUsers]) => {\n      if (key === \"A1\") {\n        response[key] = {\n          node: construct2ndTournament(bracketUsers, 0),\n        };\n      } else {\n        response[key] = {\n          node: construct2ndTournament(bracketUsers, 0),\n        };\n      }\n    });\n  return response;\n};\n\nconst splitClassA = (users: User[]) => {\n  const classes: { [key: string]: User[] } = { A1: [], A2: [], A3: [] };\n  users.sort((a, b) => a.rating - b.rating);\n\n  NEXT_A1.forEach((nextA1UserId) => {\n    const index = users.findIndex((e) => e.user_id === nextA1UserId);\n    if (index >= 0) {\n      classes.A1.push(users[index]);\n      users.splice(index, 1);\n    }\n  });\n\n  while (classes.A1.length < 32 && users.length > 0) {\n    const user = users.pop();\n    if (user) {\n      classes.A1.push(user);\n    }\n  }\n\n  NEXT_A2.forEach((nextA2UserId) => {\n    const index = users.findIndex((e) => e.user_id === nextA2UserId);\n    if (index >= 0) {\n      classes.A2.push(users[index]);\n      users.splice(index, 1);\n    }\n  });\n  while (classes.A2.length < 32 && users.length > 0) {\n    const user = users.pop();\n    if (user) {\n      classes.A2.push(user);\n    }\n  }\n  classes[\"A3\"] = users;\n  return classes;\n};\n\nconst splitClass = (users: User[], key: string) => {\n  const classLimit = Math.floor(users.length / 3);\n  const classes = [[], [], []] as [User[], User[], User[]];\n  users.sort((a, b) => b.rating - a.rating);\n\n  let pos = 0;\n  users.forEach((user) => {\n    classes[pos].push(user);\n    if (pos < 2 && classes[pos].length === classLimit) {\n      pos += 1;\n    }\n  });\n\n  const result: { [key: string]: User[] } = {};\n  result[`${key}1`] = classes[0];\n  result[`${key}2`] = classes[1];\n  result[`${key}3`] = classes[2];\n  return result;\n};\n\nconst construct2ndTournament = (\n  users: User[],\n  depth: number\n): TournamentNode => {\n  users.sort((a, b) => {\n    if (a.rating !== b.rating) {\n      return b.rating - a.rating;\n    } else {\n      return a.user_id.localeCompare(b.user_id);\n    }\n  });\n  if (users.length === 1) {\n    return {\n      user: users[0],\n      rank: null,\n      children: [],\n    };\n  } else if (depth === 4) {\n    const children = users.map((user) => ({\n      user,\n      rank: null,\n      children: [],\n    }));\n    return {\n      user: null,\n      rank: null,\n      children,\n    };\n  } else {\n    const right = [] as User[];\n    const left = [] as User[];\n    users.forEach((user, i) => {\n      if (i % 4 === 0 || i % 4 === 3) {\n        left.push(user);\n      } else {\n        right.push(user);\n      }\n    });\n\n    return {\n      user: null,\n      rank: null,\n      children: [\n        construct2ndTournament(left, depth + 1),\n        construct2ndTournament(right, depth + 1),\n      ],\n    };\n  }\n};\n","import {\n  Box,\n  Button,\n  Container,\n  CssBaseline,\n  Grid,\n  Tab,\n  Tabs,\n  Typography,\n  withStyles,\n} from \"@material-ui/core\";\nimport React, { useEffect, useState } from \"react\";\nimport { GameNode } from \"../components/GameNode/GameNode\";\nimport { TournamentResponse, User } from \"../models/TournamentNode\";\nimport { fetchTournament } from \"../utils/API\";\n\ninterface Props {\n  seasonId: string;\n}\n\nconst SingleWinnerTable = (props: { users: User[] | null | undefined }) => {\n  const { users } = props;\n  if (!users || users.length < 4) {\n    return null;\n  }\n  return (\n    <Container>\n      <Box m={2}>\n        <Typography variant=\"h3\" align=\"center\" color=\"textPrimary\">\n          優勝\n        </Typography>\n        <Typography variant=\"h3\" align=\"center\" color=\"textPrimary\">\n          {users[0].user_id}\n        </Typography>\n      </Box>\n      <Box m={2}>\n        <Typography variant=\"h4\" align=\"center\" color=\"textPrimary\">\n          準優勝\n        </Typography>\n        <Typography variant=\"h4\" align=\"center\" color=\"textPrimary\">\n          {users[1].user_id}\n        </Typography>\n      </Box>\n      <Box m={2}>\n        <Typography variant=\"h5\" align=\"center\" color=\"textPrimary\">\n          3位タイ\n        </Typography>\n        <Typography variant=\"h5\" align=\"center\" color=\"textPrimary\">\n          {users[2].user_id}\n        </Typography>\n        <Typography variant=\"h5\" align=\"center\" color=\"textPrimary\">\n          {users[3].user_id}\n        </Typography>\n      </Box>\n    </Container>\n  );\n};\nconst AntTab = withStyles(() => ({\n  root: {\n    minWidth: 10,\n  },\n  selected: {},\n}))(Tab);\n\nexport const Tournament = (props: Props) => {\n  const [tournament, setTournament] = useState<TournamentResponse>({});\n  const [selectedDivision, setSelectedDivision] = useState<number>(0);\n  const [showTop16, setShowTop16] = useState(false);\n  const keys = Object.keys(tournament);\n\n  useEffect(() => {\n    fetchTournament(props.seasonId).then((response) => {\n      setTournament(response);\n    });\n  }, [props.seasonId]);\n\n  return (\n    <>\n      <CssBaseline />\n      <Grid container justify=\"center\" direction=\"column\">\n        <Typography variant=\"h4\" align=\"center\" color=\"textPrimary\">\n          第{props.seasonId}期\n        </Typography>\n        <Typography\n          variant=\"h2\"\n          align=\"center\"\n          color=\"textPrimary\"\n          display=\"inline\"\n          noWrap\n        >\n          AtCoder Beginner Contest Tournament\n        </Typography>\n        {props.seasonId === \"2\" && (\n          <Typography\n            variant=\"h5\"\n            align=\"center\"\n            color=\"textPrimary\"\n            display=\"inline\"\n            noWrap\n          >\n            2020/11/22 19:00 JST 登録〆切\n          </Typography>\n        )}\n        <Tabs\n          variant=\"fullWidth\"\n          value={selectedDivision}\n          onChange={(e, v) => setSelectedDivision(v)}\n          centered\n        >\n          {keys.map((key, i) => (\n            <AntTab label={`${key}`} key={i} />\n          ))}\n        </Tabs>\n        {keys[selectedDivision] && (\n          <SingleWinnerTable users={tournament[keys[selectedDivision]].top4} />\n        )}\n        <Button onClick={() => setShowTop16(!showTop16)}>\n          {showTop16 ? \"全て表示する\" : \"Top16のみ表示する\"}\n        </Button>\n        <Box display=\"flex\" justifyContent=\"center\">\n          {keys[selectedDivision] && (\n            <GameNode\n              tournament={tournament[keys[selectedDivision]].node}\n              depth={0}\n              depthLimit={showTop16 ? 4 : 100}\n            />\n          )}\n        </Box>\n      </Grid>\n    </>\n  );\n};\n","import {\n  AppBar,\n  Container,\n  createMuiTheme,\n  CssBaseline,\n  Link,\n  MuiThemeProvider,\n  Toolbar,\n  Typography,\n} from \"@material-ui/core\";\nimport { makeStyles } from \"@material-ui/core/styles\";\nimport React from \"react\";\nimport {\n  HashRouter,\n  Link as RouterLink,\n  Redirect,\n  Route,\n  Switch,\n} from \"react-router-dom\";\nimport { RegisterPage } from \"./pages/RegisterPage\";\nimport { Tournament } from \"./pages/Tournament\";\nimport { SEASON_ID } from \"./utils/Constants\";\n\nconst theme = createMuiTheme({\n  palette: {\n    type: \"dark\",\n  },\n});\n\nconst useStyles = makeStyles((theme) => ({\n  appBar: {\n    borderBottom: `1px solid ${theme.palette.divider}`,\n  },\n  toolbar: {\n    flexWrap: \"wrap\",\n  },\n  toolbarTitle: {\n    flexGrow: 1,\n    textDecoration: \"none\",\n  },\n  link: {\n    margin: theme.spacing(1, 1.5),\n  },\n  heroContent: {\n    padding: theme.spacing(8, 0, 6),\n  },\n  cardHeader: {\n    backgroundColor:\n      theme.palette.type === \"light\"\n        ? theme.palette.grey[200]\n        : theme.palette.grey[700],\n  },\n  cardPricing: {\n    display: \"flex\",\n    justifyContent: \"center\",\n    alignItems: \"baseline\",\n    marginBottom: theme.spacing(2),\n  },\n  footer: {\n    borderTop: `1px solid ${theme.palette.divider}`,\n    marginTop: theme.spacing(8),\n    paddingTop: theme.spacing(3),\n    paddingBottom: theme.spacing(3),\n    [theme.breakpoints.up(\"sm\")]: {\n      paddingTop: theme.spacing(6),\n      paddingBottom: theme.spacing(6),\n    },\n  },\n}));\nconst App = () => {\n  const classes = useStyles();\n  return (\n    <HashRouter>\n      <MuiThemeProvider theme={theme}>\n        <CssBaseline />\n        <AppBar\n          position=\"relative\"\n          color=\"default\"\n          elevation={0}\n          className={classes.appBar}\n        >\n          <Toolbar className={classes.toolbar}>\n            <Typography\n              component={RouterLink}\n              variant=\"h6\"\n              color=\"inherit\"\n              noWrap\n              className={classes.toolbarTitle}\n              to=\"/\"\n            >\n              ABC トーナメント\n            </Typography>\n            <nav>\n              <Link\n                component={RouterLink}\n                variant=\"button\"\n                color=\"textPrimary\"\n                to=\"/tournament/1\"\n                className={classes.link}\n              >\n                第1期\n              </Link>\n              <Link\n                component={RouterLink}\n                variant=\"button\"\n                color=\"textPrimary\"\n                to=\"/tournament/2\"\n                className={classes.link}\n              >\n                第2期\n              </Link>\n              <Link\n                component={RouterLink}\n                variant=\"button\"\n                color=\"textPrimary\"\n                to=\"/register\"\n                className={classes.link}\n              >\n                登録\n              </Link>\n              <Link\n                href=\"https://github.com/kenkoooo/atcoder-tournament/tree/master/rules\"\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                variant=\"button\"\n                color=\"textPrimary\"\n                className={classes.link}\n              >\n                ルール\n              </Link>\n            </nav>\n          </Toolbar>\n        </AppBar>\n        <Container component=\"main\" maxWidth={false}>\n          <Switch>\n            <Route\n              exact\n              path=\"/tournament/:id([0-9]+)\"\n              render={({ match }) => {\n                const seasonId: string | undefined = match.params.id;\n                return (\n                  <Tournament seasonId={seasonId ?? SEASON_ID.toString()} />\n                );\n              }}\n            />\n            <Route path=\"/register\">\n              <RegisterPage />\n            </Route>\n            <Redirect path=\"/\" to={`/tournament/${SEASON_ID}`} />\n          </Switch>\n        </Container>\n      </MuiThemeProvider>\n    </HashRouter>\n  );\n};\n\nexport default App;\n","export const SEASON_ID = 2;\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport App from \"./App\";\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById(\"root\")\n);\n"],"sourceRoot":""}