(this["webpackJsonpatcoder-tournament"]=this["webpackJsonpatcoder-tournament"]||[]).push([[0],{81:function(e,t,n){e.exports=n(94)},94:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(10),i=n.n(o),c=n(39),l=n(70),u=n(137),s=n(129),m=n(138),d=n(139),p=n(97),f=n(134),h=n(128),g=n(127),v=n(35),E=n(11),b=n(22),x=n(54),y=n(140),k=n(126),j=n(143),C=n(130),O=n(68),w=n.n(O),N=function(e){var t=A();return r.a.createElement("form",{className:t.form,noValidate:!0,onSubmit:function(t){t.preventDefault(),e.register(e.state)}},r.a.createElement(y.a,{variant:"outlined",margin:"normal",required:!0,fullWidth:!0,label:"AtCoder ID",autoFocus:!0,value:e.state.userId,onChange:function(t){var n=t.target.value;/^[a-zA-Z0-9\-_]*$/.test(n)&&e.setState(Object(x.a)(Object(x.a)({},e.state),{},{userId:n}))}}),r.a.createElement(k.a,{type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit,disabled:0===e.state.userId.length},"\u767b\u9332"))},I=function(e){var t=A();return r.a.createElement(r.a.Fragment,null,r.a.createElement("p",null,"\u672c\u4eba\u78ba\u8a8d\u306e\u305f\u3081\u3001AtCoder \u306b\u30ed\u30b0\u30a4\u30f3\u3057\u3066\u3001\u6240\u5c5e\u3092\u4e00\u6642\u7684\u306b"),r.a.createElement("code",null,e.state.code),r.a.createElement("p",null,"\u306b\u5909\u66f4\u3057\u3066\u3001\u300c\u78ba\u8a8d\u300d\u30dc\u30bf\u30f3\u3092\u62bc\u3057\u3066\u304f\u3060\u3055\u3044\u3002"),r.a.createElement(k.a,{onClick:e.confirm,type:"submit",fullWidth:!0,variant:"contained",color:"primary",className:t.submit},"\u78ba\u8a8d"))},A=Object(g.a)((function(e){return{paper:{marginTop:e.spacing(8),display:"flex",flexDirection:"column",alignItems:"center"},avatar:{margin:e.spacing(1),backgroundColor:e.palette.secondary.main},form:{width:"100%",marginTop:e.spacing(1)},submit:{margin:e.spacing(3,0,2)}}})),P=function(){var e=A(),t=Object(a.useState)({type:"Input",userId:""}),n=Object(b.a)(t,2),o=n[0],i=n[1];return r.a.createElement(h.a,{maxWidth:"xs"},r.a.createElement(s.a,null),r.a.createElement("div",{className:e.paper},r.a.createElement(j.a,{className:e.avatar},r.a.createElement(w.a,null)),r.a.createElement(p.a,{component:"h1",variant:"h5"},"\u7b2c2\u671f"),r.a.createElement(p.a,{component:"h1",variant:"h5"},"ABC\u30c8\u30fc\u30ca\u30e1\u30f3\u30c8\u53c2\u52a0\u767b\u9332"),r.a.createElement(p.a,{component:"h2",variant:"h5"},"2020/11/22 19:00 JST \u3006\u5207"),"Input"===o.type&&r.a.createElement(N,{state:o,setState:i,register:function(e){i({type:"Pending"}),fetch("https://atcoder-auth.kenkoooo.com/api/authorize",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.userId})}).then((function(e){return e.json()})).then((function(t){i({type:"Verify",userId:e.userId,secret:t.secret,code:t.verification_code})})).catch((function(){i({type:"Failed"})}))}}),"Verify"===o.type&&r.a.createElement(I,{state:o,confirm:function(){return e=o,i({type:"Pending"}),void fetch("https://atcoder-auth.kenkoooo.com/api/confirm",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({user_id:e.userId,secret:e.secret})}).then((function(e){return e.json()})).then((function(t){var n=t.token;return fetch("https://atcoder-tournament.herokuapp.com/api/user",{method:"POST",headers:{"Content-Type":"application/x-www-form-urlencoded"},body:"user_id=".concat(e.userId,"&token=").concat(n)})})).then((function(){i({type:"Registered"})})).catch((function(){i({type:"Failed"})}));var e}}),"Failed"===o.type&&r.a.createElement("p",null,"\u767b\u9332\u306b\u5931\u6557\u3057\u307e\u3057\u305f\u3002\u672c\u4eba\u78ba\u8a8d\u306b\u5931\u6557\u3057\u305f\u304b\u3001\u65e2\u306b\u767b\u9332\u6e08\u307f\u3067\u3059\u3002"),"Registered"===o.type&&r.a.createElement("p",null,"\u767b\u9332\u5b8c\u4e86\u3057\u307e\u3057\u305f\u3002"),"Pending"===o.type&&r.a.createElement(C.a,null)))},_=n(141),S=n(4),T=n(135),B=n(136),W=n(142),L=n(48),D=n(49),F=n(131),R=n(50),J=n(132),z=n(51),U=n(133),M=n(47),V=Object(g.a)((function(){return{red:{color:L.a[500]},orange:{color:D.a[500]},yellow:{color:F.a[500]},blue:{color:R.a[600]},lightBlue:{color:J.a[200]},green:{color:z.a[400]},brown:{color:U.a[400]},grey:{color:M.a[500]}}})),Y=function(e){var t,n=V(),a=e.children,o=e.rating;if(!o)return r.a.createElement("p",null,a);t=o<400?n.grey:o<800?n.brown:o<1200?n.green:o<1600?n.lightBlue:o<2e3?n.blue:o<2400?n.yellow:o<2800?n.orange:n.red;var i=a.length<=13?a:a.slice(0,10)+"...";return r.a.createElement(f.a,{className:t,href:"https://atcoder.jp/users/".concat(a)},i)},H=Object(g.a)({nodeBox:{textShadow:"rgb(34,34,34) 1px 1px 1px",fontFamily:'"Roboto Light", sans-serif',borderWidth:0,borderRadius:"3px",fontSize:"12px",minWidth:"120px",minHeight:"24px",backgroundColor:"#595a5e"},nameContainer:{padding:"3px",margin:0,textAlign:"center"},rankContainer:{padding:"3px",borderWidth:0,borderRadius:"3px",marginLeft:"auto",fontSize:"10px",minWidth:"24px",backgroundColor:function(e){return e.winner?"#f58540":"#828489"}},nodeText:{padding:"3px",margin:0,textAlign:"center"},rankText:{color:"black",textAlign:"center",textShadow:"none"}}),X=function(e){var t=e.user,n=e.rank,a=e.winner,o=H({winner:a});if(!t)return r.a.createElement("div",{className:o.nodeBox},r.a.createElement("p",null,"..."));if(!n)return r.a.createElement("div",{className:o.nodeBox},r.a.createElement("div",{className:o.nameContainer},r.a.createElement(Y,{rating:t.rating},t.user_id)));var i=n>1e5?"-":n;return r.a.createElement(_.a,{display:"flex",justifyContent:"center",className:o.nodeBox},r.a.createElement("div",{className:o.nameContainer},r.a.createElement(Y,{rating:t.rating},t.user_id)),r.a.createElement(_.a,{display:"flex",alignItems:"center",justifyContent:"center",className:o.rankContainer},r.a.createElement("div",{className:o.rankText},i)))},q=Object(g.a)((function(){return{item:{display:"flex",flexDirection:"row-reverse","& p":{padding:"3px",margin:0,textShadow:"rgb(34, 34, 34) 1px 1px 1px",fontSize:"14px",fontFamily:'"Roboto Light", sans-serif',borderWidth:0,borderRadius:"3px",minWidth:"100px",textAlign:"center"}},itemChildren:{display:"flex",flexDirection:"column",justifyContent:"center"},itemChild:{display:"flex",alignItems:"flex-start",justifyContent:"flex-end",marginTop:"1px",marginBottom:"1px",position:"relative","&:before":{content:'""',position:"absolute",backgroundColor:"#fff",top:"50%",right:0,transform:"translateX(100%)",width:"calc(".concat("60px"," / 2)"),height:"3px"},"&:after":{content:'""',position:"absolute",backgroundColor:"#fff",top:"50%",right:"calc(-".concat("60px"," / 2)"),height:"calc(50% + ".concat("1px"," * 2)"),width:"3px"},"&:not(:last-child):not(:first-child)":{"&:after":{transform:"translateY(-50%) scaleY(2)"}},"&:last-child":{"&:after":{transform:"translateY(-100%)"}},"&:only-child:after":{display:"none"}},itemParent:{position:"relative",marginLeft:"60px",display:"flex",alignItems:"center","&:after":{position:"absolute",content:'""',width:"calc(".concat("60px"," / 2)"),height:"3px",left:0,top:"50%",backgroundColor:"#fff",transform:"translateX(-100%)"}}}})),G=function e(t){var n,a,o,i=q(),c=null===(n=t.tournament.user)||void 0===n?void 0:n.user_id;return 0===t.tournament.children.length||t.depthLimit<=t.depth?r.a.createElement(X,{user:t.tournament.user,rank:t.tournament.rank,winner:void 0!==t.promotedUser&&(null===(a=t.tournament.user)||void 0===a?void 0:a.user_id)===t.promotedUser}):r.a.createElement("div",{className:i.item},r.a.createElement("div",{className:i.itemParent},r.a.createElement(X,{user:t.tournament.user,rank:t.tournament.rank,winner:void 0!==t.promotedUser&&(null===(o=t.tournament.user)||void 0===o?void 0:o.user_id)===t.promotedUser})),r.a.createElement("div",{className:i.itemChildren},t.tournament.children.map((function(n,a){return r.a.createElement("div",{key:a,className:i.itemChild},r.a.createElement(e,{tournament:n,promotedUser:c,depth:t.depth+1,depthLimit:t.depthLimit}))}))))},K=n(55),Z=n.n(K),$=n(69),Q=function(e){return"2"===e?function(){return ee.apply(this,arguments)}():fetch("./bracket-".concat(e,".json")).then((function(e){return e.json()})).then((function(e){return e}))};function ee(){return(ee=Object($.a)(Z.a.mark((function e(){var t,n,a,r;return Z.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t=fetch("https://atcoder-tournament.herokuapp.com/api/users").then((function(e){return e.json()})).then((function(e){return e})),n=fetch("./ratings.json").then((function(e){return e.json()})).then((function(e){return e})).then((function(e){var t=new Map;return e.forEach((function(e){t.set(e.user_id.toLowerCase(),e.rating)})),t})),e.next=4,n;case 4:return a=e.sent,e.next=7,t;case 7:return r=e.sent.map((function(e){var t,n=null!==(t=a.get(e.toLowerCase()))&&void 0!==t?t:0;return{user_id:e,rating:n}})),e.abrupt("return",ae(r));case 9:case"end":return e.stop()}}),e)})))).apply(this,arguments)}var te=["kort0n","leaf1415","fuppy0716","snuke","Rubikun","dreamoon","mikit","uwi","Kiri8128","heno239","cuthbert","tempura0224","LayCurse","climpet"],ne=["carrot46","morio__","idsigma","mugen1337"],ae=function(e){var t={A:[],B:[],C:[],D:[]};e.forEach((function(e){e.rating>=2e3?t.A.push(e):e.rating>=1600?t.B.push(e):e.rating>=1200?t.C.push(e):t.D.push(e)}));var n={};return Object.entries(t).flatMap((function(e){var t=Object(b.a)(e,2),n=t[0],a=t[1];return"A"===n?Object.entries(re(a)):Object.entries(oe(a,n))})).forEach((function(e){var t=Object(b.a)(e,2),a=t[0],r=t[1];n[a]={node:ie(r,0)}})),n},re=function(e){var t={A1:[],A2:[],A3:[]};for(e.sort((function(e,t){return e.rating-t.rating})),te.forEach((function(n){var a=e.findIndex((function(e){return e.user_id===n}));a>=0&&(t.A1.push(e[a]),e.splice(a,1))}));t.A1.length<32&&e.length>0;){var n=e.pop();n&&t.A1.push(n)}for(ne.forEach((function(n){var a=e.findIndex((function(e){return e.user_id===n}));a>=0&&(t.A2.push(e[a]),e.splice(a,1))}));t.A2.length<32&&e.length>0;){var a=e.pop();a&&t.A2.push(a)}return t.A3=e,t},oe=function(e,t){var n=Math.floor(e.length/3),a=[[],[],[]];e.sort((function(e,t){return t.rating-e.rating}));var r=0;e.forEach((function(e){a[r].push(e),r<2&&a[r].length===n&&(r+=1)}));var o={};return o["".concat(t,"1")]=a[0],o["".concat(t,"2")]=a[1],o["".concat(t,"3")]=a[2],o},ie=function e(t,n){if(t.sort((function(e,t){return e.rating!==t.rating?t.rating-e.rating:e.user_id.localeCompare(t.user_id)})),1===t.length)return{user:t[0],rank:null,children:[]};if(4===n)return{user:null,rank:null,children:t.map((function(e){return{user:e,rank:null,children:[]}}))};var a=[],r=[];return t.forEach((function(e,t){t%4===0||t%4===3?r.push(e):a.push(e)})),{user:null,rank:null,children:[e(r,n+1),e(a,n+1)]}},ce=function(e){var t=e.users;return!t||t.length<4?null:r.a.createElement(h.a,null,r.a.createElement(_.a,{m:2},r.a.createElement(p.a,{variant:"h3",align:"center",color:"textPrimary"},"\u512a\u52dd"),r.a.createElement(p.a,{variant:"h3",align:"center",color:"textPrimary"},t[0].user_id)),r.a.createElement(_.a,{m:2},r.a.createElement(p.a,{variant:"h4",align:"center",color:"textPrimary"},"\u6e96\u512a\u52dd"),r.a.createElement(p.a,{variant:"h4",align:"center",color:"textPrimary"},t[1].user_id)),r.a.createElement(_.a,{m:2},r.a.createElement(p.a,{variant:"h5",align:"center",color:"textPrimary"},"3\u4f4d\u30bf\u30a4"),r.a.createElement(p.a,{variant:"h5",align:"center",color:"textPrimary"},t[2].user_id),r.a.createElement(p.a,{variant:"h5",align:"center",color:"textPrimary"},t[3].user_id)))},le=Object(S.a)((function(){return{root:{minWidth:10},selected:{}}}))(T.a),ue=function(e){var t=Object(a.useState)({}),n=Object(b.a)(t,2),o=n[0],i=n[1],c=Object(a.useState)(0),l=Object(b.a)(c,2),u=l[0],m=l[1],d=Object(a.useState)(!1),f=Object(b.a)(d,2),h=f[0],g=f[1],v=Object.keys(o);return Object(a.useEffect)((function(){Q(e.seasonId).then((function(e){i(e)}))}),[e.seasonId]),r.a.createElement(r.a.Fragment,null,r.a.createElement(s.a,null),r.a.createElement(B.a,{container:!0,justify:"center",direction:"column"},r.a.createElement(p.a,{variant:"h4",align:"center",color:"textPrimary"},"\u7b2c",e.seasonId,"\u671f"),r.a.createElement(p.a,{variant:"h2",align:"center",color:"textPrimary",display:"inline",noWrap:!0},"AtCoder Beginner Contest Tournament"),"2"===e.seasonId&&r.a.createElement(p.a,{variant:"h5",align:"center",color:"textPrimary",display:"inline",noWrap:!0},"2020/11/22 19:00 JST \u767b\u9332\u3006\u5207"),r.a.createElement(W.a,{variant:"fullWidth",value:u,onChange:function(e,t){return m(t)},centered:!0},v.map((function(e,t){return r.a.createElement(le,{label:"".concat(e),key:t})}))),v[u]&&r.a.createElement(ce,{users:o[v[u]].top4}),r.a.createElement(k.a,{onClick:function(){return g(!h)}},h?"\u5168\u3066\u8868\u793a\u3059\u308b":"Top16\u306e\u307f\u8868\u793a\u3059\u308b"),r.a.createElement(_.a,{display:"flex",justifyContent:"center"},v[u]&&r.a.createElement(G,{tournament:o[v[u]].node,depth:0,depthLimit:h?4:100}))))},se=Object(l.a)({palette:{type:"dark"}}),me=Object(g.a)((function(e){return{appBar:{borderBottom:"1px solid ".concat(e.palette.divider)},toolbar:{flexWrap:"wrap"},toolbarTitle:{flexGrow:1,textDecoration:"none"},link:{margin:e.spacing(1,1.5)},heroContent:{padding:e.spacing(8,0,6)},cardHeader:{backgroundColor:"light"===e.palette.type?e.palette.grey[200]:e.palette.grey[700]},cardPricing:{display:"flex",justifyContent:"center",alignItems:"baseline",marginBottom:e.spacing(2)},footer:Object(c.a)({borderTop:"1px solid ".concat(e.palette.divider),marginTop:e.spacing(8),paddingTop:e.spacing(3),paddingBottom:e.spacing(3)},e.breakpoints.up("sm"),{paddingTop:e.spacing(6),paddingBottom:e.spacing(6)})}})),de=function(){var e=me();return r.a.createElement(v.a,null,r.a.createElement(u.a,{theme:se},r.a.createElement(s.a,null),r.a.createElement(m.a,{position:"relative",color:"default",elevation:0,className:e.appBar},r.a.createElement(d.a,{className:e.toolbar},r.a.createElement(p.a,{component:v.b,variant:"h6",color:"inherit",noWrap:!0,className:e.toolbarTitle,to:"/"},"ABC \u30c8\u30fc\u30ca\u30e1\u30f3\u30c8"),r.a.createElement("nav",null,r.a.createElement(f.a,{component:v.b,variant:"button",color:"textPrimary",to:"/tournament/1",className:e.link},"\u7b2c1\u671f"),r.a.createElement(f.a,{component:v.b,variant:"button",color:"textPrimary",to:"/tournament/2",className:e.link},"\u7b2c2\u671f"),r.a.createElement(f.a,{component:v.b,variant:"button",color:"textPrimary",to:"/register",className:e.link},"\u767b\u9332"),r.a.createElement(f.a,{href:"https://github.com/kenkoooo/atcoder-tournament/tree/master/rules",target:"_blank",rel:"noopener noreferrer",variant:"button",color:"textPrimary",className:e.link},"\u30eb\u30fc\u30eb")))),r.a.createElement(h.a,{component:"main",maxWidth:!1},r.a.createElement(E.d,null,r.a.createElement(E.b,{exact:!0,path:"/tournament/:id([0-9]+)",render:function(e){var t=e.match.params.id;return r.a.createElement(ue,{seasonId:null!==t&&void 0!==t?t:2..toString()})}}),r.a.createElement(E.b,{path:"/register"},r.a.createElement(P,null)),r.a.createElement(E.a,{path:"/",to:"/tournament/".concat(2)})))))};i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(de,null)),document.getElementById("root"))}},[[81,1,2]]]);
//# sourceMappingURL=main.40e0ebbd.chunk.js.map