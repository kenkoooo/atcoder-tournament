# ABCトーナメントルール（第8期〜）

- AtCoder Beginner Contest の結果を使ったトーナメント戦です。
- 1回戦を除き、各試合は1対1で行われ、指定されたABCでの順位が高かった方が勝者となり、次の試合に進出します。
- 1回戦は2名以上のブロックに分かれ、指定されたABCでの順位が最も高かった者が勝者となり、次の試合に進出します。
- 敗退した場合は、以降の試合では順位決定リーグに参加します（後述）。
- 使用する最高レートは1回戦の直前のものを使います。
- 同順位の場合は、最高レートが高い方を勝者とします。
- コンテストにおいて以下に該当するユーザーは (コンテストで正の点数を取った人数 + 1) 位となります。
    - コンテストに参加登録していないユーザー
    - コンテストに参加登録したが1回も提出していないユーザー
    - コンテストに参加登録し、1回以上提出したが点数が得られなかったユーザー

## 順位決定リーグ

- トーナメントの途中（決勝戦以外）で敗退した場合、次の試合から順位決定リーグに参加し、3位以下の最終順位を決定します。
- 順位決定リーグはスイス式で行われます。
    - 試合ごとに勝利数の同じ参加者同士をランダムにマッチングします。
- 途中からの参加者は、トーナメントの勝利数を保持した状態でリーグに参加します。
    - 例えば、3回戦で敗退した参加者は、勝利数2の状態で4回戦からリーグに参加します。
- リーグ最終順位は、勝利数の多いほうが上になります。
- 勝利数が同じ場合は、期間中のABCの順位の調和平均が小さいほうが、リーグ最終順位が上になります。
    - writer参加による不戦敗の場合、その回を除外して調和平均を計算します。例えば、4回分の結果が、5位、3位、writerで不参加、6位、だった場合、調和平均は`1/((1/5+1/3+1/6)/3)=4.29`となります。
- 勝利数も順位の調和平均も同じ場合は、最高レートの高いほうがリーグ最終順位が上になります。
- 順位決定リーグにおいては、対戦者両名とも不参加だった場合、両名とも不戦敗とします。

## クラス分け

1回戦直前のAtCoderの最高レートに基づいて、以下のようにクラス分けを行います。

| 最高レート       | 段級位  | クラス |
|:------------|:----:|:---:|
| 2000以上      | 初段以上 |  A  |
| 1600 - 1999 | 1-2級 |  B  |
| 1200 - 1599 | 3-4級 |  C  |
| 0 - 1199    | 5級以下 |  D  |

## Aクラスの分割

Aクラスは以下のようにA1、A2、A3の3つに分割します。

直感的には以下のとおりです。

- 前期A1上位22名はA1残留、23位以下はA2へ降級
- 前期A2上位10名はA1昇級、23位以下はA3へ降級

### A1

下記のいずれかの条件を満たす参加者はA1に所属します。

- 前期A1で22位以内
- 前期A2で10位以内
- AtCoder五段以上

上記の参加者で32名に満たない場合、32名になるまで前期上位者をA1に加えます。

### A2

A1に含まれない参加者のうち、下記のいずれかの条件を満たす参加者はA2に所属します。

- 前期A2で22位以内
- 前期A3で10位以内
- AtCoder三段以上

上記の参加者で32名に満たない場合、32名になるまで前期上位者をA2に加えます。

### A3

A1およびA2に含まれないAtCoder初段以上の参加者はA3に所属します。

A3の人数が64人以上の時、参加者のレートが均一になるようにA3-1とA3-2に分割します。この時、A3-1の5位以内とA3-2の5位以内の計10名をA3の10位以内とし、次期A2に参加させます。

## B〜Dクラスの分割

B〜Dクラスは、最高レートの高い順に、人数が均等になるように最大3つに分割します。

## 各試合の対象となるABC

各試合の対象となる ABC は以下のとおりです。他のコンテストとの兼ね合いなどで変更になることがあるので、注意してください。

### 第8期

- 1回戦: AtCoder Beginner Contest 236
- 2回戦: AtCoder Beginner Contest 237
- ~~準々決勝: AtCoder Beginner Contest 238~~
- ~~準々決勝: AtCoder Beginner Contest 239~~
- 準々決勝: AtCoder Beginner Contest 240
- ~~準決勝: AtCoder Beginner Contest 241~~
- 準決勝: AtCoder Beginner Contest 242
- 決勝: AtCoder Beginner Contest 243

### 第9期

- 1回戦: AtCoder Beginner Contest 245
- 2回戦: AtCoder Beginner Contest 246
- 準々決勝: AtCoder Beginner Contest 247
- ~~準決勝: AtCoder Beginner Contest 248~~
- ~~準決勝: AtCoder Beginner Contest 249~~
- 準決勝: AtCoder Beginner Contest 250
- 決勝: AtCoder Beginner Contest 251
